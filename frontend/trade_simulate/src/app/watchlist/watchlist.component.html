<br>
<h1>WatchList</h1>
<br>
<div class="form-group">
    <label for="NewStock">Add a new Stock to your watchlist!</label>
    <input type="text" class="form-control" name="newStock" [(ngModel)] = "newStock" (keyup.enter)="verifyStock(newStock)">
</div>
<body (click)="closeMessage()">
    <!-- Sidebar -->
    
    <div id="list-container">
        <div class="alert alert-success" *ngIf='message'>
            <a (click)="closeMessage()" class="btn alert-failure text-right">&times;</a><br>{{ message }}
        </div>
        <div class="alert alert-danger" *ngIf='fail_message'>
            <a (click)="closeMessage()" class="btn alert-failure text-right">&times;</a><br>{{ fail_message }}
        </div>
        <ul id="item-list">
            <li *ngFor="let stock of watchListStocks">
                <a (click)="displayStock(stock)" class="btn">{{stock}}
                    <div class="popup-container">
                        <a class="btn btn-success" (click)="toggleBuyPopup(stock)">Buy</a>
                        <div class="popup-content" id="buyPopup{{stock}}">
                            <button (click)="closeBuyPopup(stock, 1)" class="close-button">&times;</button>
                            <label for="CurrPriceBuy" >Current Price</label>
                            <input type="text" id="CurrPriceBuy" placeholder={{stock_price}} readonly>
                    
                            <label for="buyQuantity">Quantity</label>
                            <input type="text" id="buyQuantity" [(ngModel)] = "buyQuantity">
                    
                            <button (click)="closeBuyPopup(stock, 0)">Buy</button>
                        </div>
                    </div>
                    <div class="popup-container">
                        <a class="btn btn-warning" (click)="toggleSellPopup(stock)">Sell</a>
                        <div class="popup-content" id="sellPopup{{stock}}">
                            <button (click)="closeSellPopup(stock, 1)" class="close-button">&times;</button>
                            <label for="CurrPriceSell">Current Price</label>
                            <input type="text" id="CurrPriceSell" placeholder={{stock_price}} readonly>
                            <label for="sellQuantity">Quantity</label>
                            <input type="text" id="sellQuantity" [(ngModel)] = "sellQuantity">
                    
                            <button (click)="closeSellPopup(stock, 0)">Sell</button>
                        </div>
                    </div>
                    <a (click)="deleteStock(stock)" class="btn btn-warning btn-outline-primary btn-block col-xs-3 mr-1 btn-space">Delete </a><br></a>
            </li>
        </ul>
    </div>
    <div id="content-container" *ngIf="displayData">

        <div>
            <canvas baseChart
                [datasets]="lineChartData"
                [labels]="lineChartLabels"
                [options]="lineChartOptions"
                [legend]="lineChartLegend"
                [type]="lineChartType">
            </canvas>
        </div>
    </div>
</body >
